{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\新建文件夹\\axios-vueapp\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\新建文件夹\\axios-vueapp\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\新建文件夹\\axios-vueapp\\src\\router\\index.js","mtime":1633601691194},{"path":"C:\\Users\\Administrator\\Desktop\\新建文件夹\\axios-vueapp\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\新建文件夹\\axios-vueapp\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKVnVlLnVzZShSb3V0ZXIpOwp2YXIgcm91dGVyID0gbmV3IFJvdXRlcih7CiAgbW9kZTogJ2hpc3RvcnknLAogIHJvdXRlczogW3sKICAgIC8vIOiuvue9ruS4uum7mOiupOi3r+eUsQogICAgcGF0aDogJy8nLAogICAgcmVkaXJlY3Q6ICcvbG9naW4nCiAgfSwgewogICAgcGF0aDogJy9sb2dpbicsCiAgICAvLyAg5L2/55SoRVPkuK3nmoRpbXBvcnTov5vooYzmh5LliqDovb0gICjmjqjojZDkvb/nlKjvvIzkuZ/mmK/mnIDluLjnlKjnmoQpCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnLi4vY29tcG9uZW50cy9Mb2dpbi9sb2dpbi52dWUnKTsKICAgIH0sCiAgICAvLyAg5L2/55SoVlVF5Lit55qE5byC5q2l57uE5Lu26L+b6KGM5oeS5Yqg6L29CiAgICAvLyBjb21wb25lbnQ6IHJlc29sdmUgPT4geyByZXF1aXJlKFsnLi4vY29tcG9uZW50cy9Mb2dpbi9sb2dpbi52dWUnXSxyZXNvdmxlKTsgfQogICAgbWV0YTogewogICAgICByZXF1aXJlQXV0aDogdHJ1ZQogICAgfQogIH0sIHsKICAgIHBhdGg6ICcvaG9tZScsCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnLi4vdmlld3MvSG9tZS9ob21lLnZ1ZScpOwogICAgfQogIH0sIHsKICAgIHBhdGg6ICcvZ3djJywKICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICByZXR1cm4gaW1wb3J0KCcuLi92aWV3cy9Hd2MvZ3djLnZ1ZScpOwogICAgfQogIH1dCn0pOyAvLyBsZXQgbm9yZXF1aXJlTG9naW4gPSBbJy9sb2dpbiddOwovLyByb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZvcm0sIG5leHQpID0+IHsKLy8gICBpZiAobm9yZXF1aXJlTG9naW4uaW5jbHVkZXModG8ucGF0aCkpIHJldHVybiBuZXh0KCk7Ci8vICAgaWYgKCF0b2tlbil7Ci8vICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFBhdGgnLHRvLnBhdGgpCi8vICAgICBzZXRUaW1lb3V0KCgpPT57Ci8vICAgICAgIGFsZXJ0KCfor7flhYjnmbvlvZUnKQovLyAgICAgICByZXR1cm4gbmV4dCgnL2xvZ2luJyk7Ci8vICAgICB9LDUwMCkKLy8gICB9Ci8vICAgbmV4dCgpOwovLyB9KQoKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgdmFyIHRva2VuID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VucycpOwoKICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHJldHVybiByZWNvcmQubWV0YS5yZXF1aXJlQXV0aDsKICB9KSkgewogICAgLy/ot6/nlLHlhYPkv6Hmga9yZXF1aXJlQXV0aDp0cnVl77yM5oiW6ICFaG9tZVBhZ2VzOnRydWXvvIzliJnkuI3lgZrnmbvlvZXmoKHpqowKICAgIG5leHQoKTsKICB9IGVsc2UgewogICAgaWYgKHRva2VuKSB7CiAgICAgIC8v5Yik5pat55So5oi35piv5ZCm55m75b2VCiAgICAgIGlmIChPYmplY3Qua2V5cyhmcm9tLnF1ZXJ5KS5sZW5ndGggPT09IDApIHsKICAgICAgICAvL+WIpOaWrei3r+eUseadpea6kOaYr+WQpuaciXF1ZXJ577yM5aSE55CG5LiN5piv55uu55qE6Lez6L2s55qE5oOF5Ya1CiAgICAgICAgbmV4dCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciByZWRpcmVjdCA9IGZyb20ucXVlcnkucmVkaXJlY3Q7IC8v5aaC5p6c5p2l5rqQ6Lev55Sx5pyJcXVlcnkKCiAgICAgICAgaWYgKHRvLnBhdGggPT09IHJlZGlyZWN0KSB7CiAgICAgICAgICAvL+i/meihjOaYr+ino+WGs25leHTml6DpmZDlvqrnjq/nmoTpl67popgKICAgICAgICAgIG5leHQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgIHBhdGg6IHJlZGlyZWN0CiAgICAgICAgICB9KTsgLy/ot7PovazliLDnm67nmoTot6/nlLEKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICh0by5wYXRoID09PSAiL2xvZ2luIikgewogICAgICAgIG5leHQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXh0KHsKICAgICAgICAgIHBhdGg6ICIvbG9naW4iLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgcmVkaXJlY3Q6IHRvLmZ1bGxQYXRoCiAgICAgICAgICB9IC8v5bCG55uu55qE6Lev55Sx5Zyw5Z2A5a2Y5YWlbG9naW7nmoRxdWVyeeS4rQoKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuOwp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["C:/Users/Administrator/Desktop/新建文件夹/axios-vueapp/src/router/index.js"],"names":["Vue","Router","use","router","mode","routes","path","redirect","component","meta","requireAuth","beforeEach","to","from","next","token","window","sessionStorage","getItem","matched","some","record","Object","keys","query","length","fullPath"],"mappings":";;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACAD,GAAG,CAACE,GAAJ,CAAQD,MAAR;AACA,IAAME,MAAM,GAAG,IAAIF,MAAJ,CAAW;AACxBG,EAAAA,IAAI,EAAC,SADmB;AAExBC,EAAAA,MAAM,EAAG,CACP;AACD;AACEC,IAAAA,IAAI,EAAE,GAFP;AAGCC,IAAAA,QAAQ,EAAE;AAHX,GADO,EAMP;AACCD,IAAAA,IAAI,EAAC,QADN;AAEA;AACCE,IAAAA,SAAS,EAAC;AAAA,aAAM,OAAO,+BAAP,CAAN;AAAA,KAHX;AAIA;AACA;AACAC,IAAAA,IAAI,EAAC;AACHC,MAAAA,WAAW,EAAC;AADT;AANL,GANO,EAgBP;AACCJ,IAAAA,IAAI,EAAC,OADN;AAECE,IAAAA,SAAS,EAAC;AAAA,aAAM,OAAO,wBAAP,CAAN;AAAA;AAFX,GAhBO,EAoBP;AACEF,IAAAA,IAAI,EAAC,MADP;AAEEE,IAAAA,SAAS,EAAC;AAAA,aAAM,OAAO,sBAAP,CAAN;AAAA;AAFZ,GApBO;AAFe,CAAX,CAAf,C,CA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAL,MAAM,CAACQ,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAMC,KAAK,GAAGC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,QAA9B,CAAd;;AACA,MAAGN,EAAE,CAACO,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACZ,IAAP,CAAYC,WAAhB;AAAA,GAAtB,CAAH,EAAsD;AAClD;AACAI,IAAAA,IAAI;AACP,GAHD,MAGK;AACD,QAAGC,KAAH,EAAS;AAAC;AACN,UAAGO,MAAM,CAACC,IAAP,CAAYV,IAAI,CAACW,KAAjB,EAAwBC,MAAxB,KAAmC,CAAtC,EAAwC;AAAC;AACrCX,QAAAA,IAAI;AACP,OAFD,MAEK;AACD,YAAIP,QAAQ,GAAGM,IAAI,CAACW,KAAL,CAAWjB,QAA1B,CADC,CACiC;;AAClC,YAAGK,EAAE,CAACN,IAAH,KAAYC,QAAf,EAAwB;AAAC;AACrBO,UAAAA,IAAI;AACP,SAFD,MAEK;AACDA,UAAAA,IAAI,CAAC;AAACR,YAAAA,IAAI,EAACC;AAAN,WAAD,CAAJ,CADC,CACoB;AACxB;AACJ;AACJ,KAXD,MAWK;AACD,UAAGK,EAAE,CAACN,IAAH,KAAU,QAAb,EAAsB;AAClBQ,QAAAA,IAAI;AACP,OAFD,MAEK;AACDA,QAAAA,IAAI,CAAC;AACCR,UAAAA,IAAI,EAAC,QADN;AAECkB,UAAAA,KAAK,EAAE;AAACjB,YAAAA,QAAQ,EAAEK,EAAE,CAACc;AAAd,WAFR,CAE+B;;AAF/B,SAAD,CAAJ;AAIH;AACJ;AACJ;;AACD;AACD,CA7BD;AAiCA,eAAevB,MAAf","sourcesContent":["import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nVue.use(Router)\r\nconst router = new Router({ \r\n  mode:'history',\r\n  routes : [\r\n    {\r\n   // 设置为默认路由\r\n     path: '/',\r\n     redirect: '/login'\r\n    },\r\n    {\r\n     path:'/login',\r\n    //  使用ES中的import进行懒加载  (推荐使用，也是最常用的)\r\n     component:() => import('../components/Login/login.vue'),\r\n    //  使用VUE中的异步组件进行懒加载\r\n    // component: resolve => { require(['../components/Login/login.vue'],resovle); }\r\n    meta:{\r\n      requireAuth:true\r\n    }\r\n   },\r\n    {\r\n     path:'/home',\r\n     component:() => import('../views/Home/home.vue')\r\n    },\r\n    {\r\n      path:'/gwc',\r\n      component:() => import('../views/Gwc/gwc.vue')\r\n     }\r\n   \r\n]\r\n})\r\n// let norequireLogin = ['/login'];\r\n// router.beforeEach((to, form, next) => {\r\n//   if (norequireLogin.includes(to.path)) return next();\r\n//   if (!token){\r\n//     window.sessionStorage.setItem('currentPath',to.path)\r\n//     setTimeout(()=>{\r\n//       alert('请先登录')\r\n//       return next('/login');\r\n//     },500)\r\n//   }\r\n//   next();\r\n// })\r\nrouter.beforeEach((to, from ,next) => {\r\n  const token = window.sessionStorage.getItem('tokens');\r\n  if(to.matched.some(record => record.meta.requireAuth)){\r\n      //路由元信息requireAuth:true，或者homePages:true，则不做登录校验\r\n      next()\r\n  }else{\r\n      if(token){//判断用户是否登录\r\n          if(Object.keys(from.query).length === 0){//判断路由来源是否有query，处理不是目的跳转的情况\r\n              next()\r\n          }else{\r\n              let redirect = from.query.redirect//如果来源路由有query\r\n              if(to.path === redirect){//这行是解决next无限循环的问题\r\n                  next()\r\n              }else{\r\n                  next({path:redirect})//跳转到目的路由\r\n              }\r\n          }\r\n      }else{\r\n          if(to.path===\"/login\"){\r\n              next()\r\n          }else{\r\n              next({\r\n                    path:\"/login\",\r\n                    query: {redirect: to.fullPath}//将目的路由地址存入login的query中\r\n              })\r\n          }\r\n      }\r\n  }\r\n  return\r\n})\r\n\r\n\r\n\r\nexport default router\r\n"]}]}